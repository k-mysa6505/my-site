---
import Breadcrumbs from "../components/Breadcrumbs.astro";
import DancingChocoChips from "../components/DancingChocoChips.astro";
import SnsLinks from "../components/SnsLinks.astro";

// 現在の年を取得
const currentYear = new Date().getFullYear();

// このページがビルドされた日付を取得・整形
const lastUpdated = new Date().toISOString().slice(0, 10);

const currentPath = Astro.url.pathname;
const navLinks = [
  { href: "/blog/", label: "Blog" },
  { href: "/works/", label: "Works" },
  { href: "/about/", label: "About" },
  { href: "/contact/", label: "Contact" },
];
---
<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/png" href="/images/icon.png" />
        <link rel="stylesheet" href="/style/destyle.css">
		<meta name="generator" content={Astro.generator} />
        <link href="https://fonts.googleapis.com/css2?family=Oswald:ital,wght@1,300&display=swap" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
	</head>
    <body>
        <div id="site-wrapper">
            <header>
                <nav class="site-nav" aria-label="main-nav">
                <div class="site-title-wrap">
                    <p class="site-title" itemprop="name">
                        <a href="/" rel="home" itemprop="url">Kokko's Blog</a>
                    </p>
                    <p class="site-description" itemprop="description">MYSのホームページ</p>
                </div>
                <ul class="nav-list">
                  {navLinks.map(link => (
                    <li>
                      <a
                        href={link.href}
                        aria-current={currentPath === link.href ? "page" : undefined}
                      >
                        {link.label}
                      </a>
                    </li>
                  ))}
                </ul>
                </nav>
            </header>
            <main>
                <div class="sub-header">
                    <p class="updated-date">updated on {lastUpdated}</p> 
                    <Breadcrumbs />
                </div>
                <slot />
            </main>
            <footer>
                <div class="footer-nav">
                    <div class="footer-section">
                        <h4>ー Site Map ー</h4>
                        <ul>
                            <li><a href="/">Home</a></li>
                            <li><a href="/blog/">Blog</a></li>
                            <li><a href="/works/">Works</a></li>
                            <li><a href="/about/">About</a></li>
                            <li><a href="/contact">Contact</a></li>
                        </ul>
                    </div>
                    <div class="footer-section">
                        <h4>ー Social ー</h4>
                        <ul class="footer-sns-list">
                            <li><a href="https://github.com/" target="_blank" rel="noopener noreferrer">GitHub</a></li>
                            <li><a href="https://twitter.com/" target="_blank" rel="noopener noreferrer">Twitter</a></li>
                            <li><a href="https://facebook.com" target="_blank" rel="noopener noreferrer">Facebook</a></li>
                            <li><a href="https://instagram.com/" target="_blank" rel="noopener noreferrer">Instagram</a></li>
                        </ul>
                    </div>
                    <div class="footer-section">
                        <h4>ー Contact ー</h4>
                        <a href="/contact">Contact Form</a>
                    </div>
                    <div class="footer-section">
                        <h4>ー Site Policy ー</h4>
                        <ul>
                            <li><a href="/privacy-policy">プライバシーポリシー</a></li>
                            <li><a href="/terms">利用規約</a></li>
                        </ul>
                    </div>
                </div>
                <div class="footer-credit">
                    <p>© Copyright {currentYear} 
                        <a href="/">Kokko's Blog</a>. 
                        All Rights Reserved.</p>
                    <p>Powered by <a href="https://astro.build/" target="_blank" rel="noopener">Astro</a> | Icons by <a href="https://icons8.com/" target="_blank" rel="noopener">Icons8</a></p>
                </div>
            </footer>
        </div>
        <DancingChocoChips />
        <button id="scrollTopBtn" aria-label="トップに戻る" type="button">
            ↑
        </button>
    </body>
</html>

<style>
html {
    background-color: #77c1c1;
}
body {
    display: flex;
    flex-direction: column;
    background-color: #e0e8e8e8;
    max-width: 85%;
    min-height: 98vh;
    margin: 0 auto;
}
header {
    background-color: #009c99;
    padding: 20px;
}
footer {
    background-color: #333;
    margin-top: auto;
    padding: 30px 0 10px 0;
    font-size: 0.85em;
    color: #ccc;
    text-align: center;
    line-height: 2.0em;
}
.site-nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 2em;
}
.site-title-wrap {
    display: flex;
    flex-direction: column;
    align-items: center;
}
.site-title {
    font-family: 'Oswald', 'Arial Narrow', Arial, sans-serif;
    font-size: 2rem;
    font-weight: bold;
    font-style: italic;
    color: #3B2212;
    margin: 0;
    letter-spacing: -0.04em;
    transition: text-shadow 0.4s, color 0.3s;
}
.site-title:hover {
    color: #7fffd4;
    text-shadow: 0 0 12px #7fffd4, 0 0 24px #7fffd4;
}
.site-description {
    font-size: 0.65rem;
    color: #ddd;
    margin: 0 0 0.2em 0;
}
.nav-list {
    display: flex;
    gap: 1.5em;
    list-style: none;
    margin: 0;
    padding: 0;
    align-items: center;
}
.nav-list li {
    position: relative;
}
.nav-list a {
    text-decoration: none;
    color: #ddd;
    font-weight: 400;
    padding: 0.3em 0.7em;
    position: relative;
    transition: background 0.2s, color 0.2s;
}
.nav-list a::after {
    content: '';
    display: block;
    position: absolute;
    left: 0;
    bottom: 0.1em;
    width: 100%;
    height: 2px;
    background: #4B2121;
    transform: scaleX(0);
    transform-origin: center;
    transition: transform 0.3s cubic-bezier(.4,0,.2,1);
}
.nav-list a:hover::after,
.nav-list a[aria-current="page"]::after {
    transform: scaleX(1);
}
.nav-list a:hover,
.nav-list a[aria-current="page"] {
    text-decoration: none;
}
.nav-list a.current {
    background: none;
    color: #bbb;
    font-weight: bold;
    pointer-events: none;
    cursor: default;
}
.nav-list a[aria-current="page"] {
    color: #4B2121;
}
.nav-list a[aria-current="page"]::after {
    transform: scaleX(1);
}
.sub-header {
    display: flex;
    margin: 10px 20px;
    font-size: 0.65em;
    color: #333;
}
#scrollTopBtn {
    position: fixed;
    right: 2vw;
    bottom: 3vh;
    width: 65px;
    height: 65px;
    border: none;
    background: #4B2121;
    color: #ddd;
    font-size: 1.5rem;
    text-align: center;
    cursor: pointer;
    z-index: 2000;
    transition: opacity 0.3s, visibility 0.3s, transform 0.3s;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transform: translateY(20px);
}
#scrollTopBtn.show {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
    transform: translateY(0);
}
#scrollTopBtn:hover {
    opacity: 1;
    background: #009c99;
}
.footer-nav {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 4.5em;
    margin-bottom: 1.5em;
}
.footer-section {
    min-width: 150px;
}
.footer-section h4 {
    font-family: 'Montserrat';
    font-size: 1.2em;
    color: #7fffd4;
    margin-bottom: 0.5em;
    font-weight: bold;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    text-align: center;
}
.footer-section ul {
    list-style: none;
    padding: 0;
    margin: 0;
}
.footer-section ul li {
    margin-bottom: 0.3em;
}
.footer-section a {
    color: #ddd;
    text-decoration: none;
    transition: color 0.2s;
}
.footer-section a:hover {
    color: #7fffd4;
    text-decoration: underline;
}
.footer-credit {
    font-size: 0.75em;
    color: #aaa;
    margin-top: 1.5em;
}
.footer-credit a {
    transition: 0.2s;
    text-decoration: none;
}
.footer-credit a:hover {
    color: #eee;
    text-decoration: underline;
}
.footer-sns-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 0.3em;
    align-items: center;
}
.footer-sns-list li a {
    color: #ddd;
    text-decoration: none;
    transition: color 0.2s;
}
.footer-sns-list li a:hover {
    color: #7fffd4;
    text-decoration: underline;
}
.submit-btn {
  transition: background 0.2s, color 0.2s;
}
.submit-btn:not(:disabled):hover {
  background: #009c99;
  color: #fff;
}
</style>
<script>
const scrollTopBtn = document.getElementById('scrollTopBtn');
window.addEventListener('scroll', () => {
    if (!scrollTopBtn) return;
    if (window.scrollY > 0) {
        scrollTopBtn.classList.add('show');
    } else {
        scrollTopBtn.classList.remove('show');
    }
});
if(scrollTopBtn){
    scrollTopBtn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    });
}
</script>
